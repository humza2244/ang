<app-header></app-header>

<div class="marketplace-layout">
  <!-- Left Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Marketplace</h2>
    </div>

    <div class="search-section">
      <input 
        type="text" 
        placeholder="Search Marketplace..." 
        class="sidebar-search"
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()">
      <button class="search-icon-btn" (click)="onSearch()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>
    </div>

    <div class="filter-section">
      <h3>Filters</h3>
      
      <div class="filter-group">
        <label class="filter-label">Category</label>
        <select class="sidebar-select" [(ngModel)]="selectedCategory" (change)="onFilterChange()">
          <option>All Categories</option>
          <option>Electronics</option>
          <option>Furniture</option>
          <option>Clothing</option>
          <option>Books</option>
          <option>Vehicles</option>
          <option>Other</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Location</label>
        <select class="sidebar-select" [(ngModel)]="selectedLocation" (change)="onFilterChange()">
          <option>All Locations</option>
          <option>Waterloo</option>
          <option>Toronto</option>
          <option>Ottawa</option>
          <option>Montreal</option>
        </select>
      </div>

      <div class="filter-group">
        <label class="filter-label">Sort By</label>
        <select class="sidebar-select" [(ngModel)]="selectedSort" (change)="onFilterChange()">
          <option value="newest">Newest First</option>
          <option value="price-low">Price: Low to High</option>
          <option value="price-high">Price: High to Low</option>
        </select>
      </div>
    </div>

    <div class="results-count">
      {{ filteredListings.length }} items found
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content">
    <div class="content-header">
      <h1>Browse All</h1>
    </div>

    <div class="listings-grid">
      <app-listing-card 
        *ngFor="let listing of filteredListings" 
        [listing]="listing">
      </app-listing-card>
      
      <div *ngIf="filteredListings.length === 0" class="no-results">
        <p>No listings found. Try adjusting your filters.</p>
      </div>
    </div>
  </main>
</div>
